name: Simple CI for Exam

on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main

jobs:
  run-ci:
    runs-on: ubuntu-latest

    if: github.event_name != 'push' || github.ref == 'refs/heads/main'

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Install dependencies
      run: |
        pip install pytest
        # pip install cml

    - name: Run test
      run: |
        echo "✅ Running simple test..."
        pytest -q
      
    - name: Install CML
      run: npm install -g @dvcorg/cml

    - name: CML message
      run: |
        echo "✅ CML: Training pipeline validated!" > report.md
        cml comment create report.md
